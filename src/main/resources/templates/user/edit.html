<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{partials/fragment.html :: head('Profile')}"></head>
<body>
<nav th:replace="~{partials/fragment.html :: nav}"></nav>

<section class="d-flex">
    <div class="mt-4 mb-4 p-4 container col-12 col-sm-10 col-md-6 form-box">
        <form th:method="post" th:action="@{/profile/edit}" th:object="${user}">
            <input type="hidden" th:field="*{id}">
            <div class="mt-1 col-12">
                <div class="label-holder">
                    <label class="label" for="firstName">First Name</label>
                </div>
                <div>
                    <input class="text-input" id="firstName" type="text" th:field="*{firstName}">
                </div>
            </div>
            <div class="mt-1 col-12">
                <div class="label-holder">
                    <label class="label" for="lastName">Last Name</label>
                </div>
                <div>
                    <input class="text-input" id="lastName" type="text" th:field="*{lastName}">
                </div>
            </div>
            <div class="mt-1 col-12">
                <div class="label-holder">
                    <label class="label" for="username">Username&ast;</label>
                </div>
                <div>
                    <input class="text-input" id="username" type="text" th:field="*{username}" required>
                </div>
            </div>
            <div class="mt-1 col-12">
                <div class="label-holder">
                    <label class="label" for="email">Email</label>
                </div>
                <div>
                    <input class="text-input" id="email" type="email" th:field="*{email}">
                </div>
            </div>
            <div class="mt-1 col-12">
                <div class="label-holder">
                    <label class="label" for="zipCode">Zip Code</label>
                </div>
                <div>
                    <input class="text-input" id="zipCode" type="text" th:field="*{zipCode}">
                </div>
                <div class="label-holder">
                    <label class="label" for="password">Current Password</label>
                </div>
                <div>
                    <input type="password" id="password" class="text-input" th:name="currentPW">
                </div>
            </div>
            <div class="mt-1 col-12">
                <div class="label-holder">
                    <label for="newPW" class="label">New Password</label>
                </div>
                <div>
                    <input type="password" id="newPW" class="text-input" th:name="newPW" pattern="^(?=.*[A-Za-z])(?=.*\d)(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{8,}$">
                    <small>
                        Password must meet the following criteria:
                        <ul>
                            <li>At least 8 characters long</li>
                            <li>Contain at least one letter (uppercase or lowercase)</li>
                            <li>Contain at least one digit</li>
                            <li>Contain at least one special character (!, @, #, $, %, ^, &, *)</li>
                        </ul>
                    </small>
                </div>
            </div>
            <div class="d-flex justify-content-end">
                <a class="btn button-secondary mt-4 mb-4 me-3" onclick="history.back()">Go Back</a>
                <button class="mt-4 mb-4 btn button-main" type="submit">Update</button>
            </div>
        </form>
        <form th:action="@{/profile/delete}" th:method="post">
            <input type="hidden" th:value="${#authentication.principal.id}"
                   th:name="id">
            <button class="mt-4 mb-4 btn button-secondary" onclick="return confirm('Are you sure about that?')"
                    type="submit">Delete Account</button>
        </form>
    </div>
</section>

<footer th:replace="~{partials/fragment.html :: footer}"></footer>
</body>
</html>